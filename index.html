<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Descartes - Real-Time Parametric Trigger Monitoring</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #10b981;
            --primary-dark: #059669;
            --secondary: #06b6d4;
            --accent: #f59e0b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-dark: #050a0a;
            --bg-card: #0a1414;
            --bg-elevated: #0f1f1f;
            --text-primary: #ecfdf5;
            --text-secondary: #6ee7b7;
            --text-muted: #34d399;
            --border: #134e4a;
            --gradient-main: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
            --gradient-danger: linear-gradient(135deg, #ef4444 0%, #f59e0b 100%);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            background-image: 
                radial-gradient(ellipse at 20% 80%, rgba(16, 185, 129, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(6, 182, 212, 0.06) 0%, transparent 50%);
        }

        .header {
            background: rgba(10, 20, 20, 0.95);
            border-bottom: 1px solid var(--border);
            padding: 0.75rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(20px);
        }

        .header-content {
            max-width: 1920px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-main);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        }

        .logo-text {
            font-size: 1.3rem;
            font-weight: 700;
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo-subtitle {
            font-size: 0.65rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        .header-center {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .header-stat {
            text-align: center;
            padding: 0 1rem;
            border-right: 1px solid var(--border);
        }

        .header-stat:last-child { border-right: none; }

        .header-stat-value {
            font-size: 1.1rem;
            font-weight: 700;
            font-family: 'IBM Plex Mono', monospace;
        }

        .header-stat-value.live { color: var(--success); }
        .header-stat-value.alert { color: var(--danger); animation: alertPulse 1s infinite; }
        .header-stat-value.warning { color: var(--warning); }

        .header-stat-label {
            font-size: 0.6rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        @keyframes alertPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid var(--success);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.7rem;
            color: var(--success);
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: livePulse 1.5s infinite;
        }

        @keyframes livePulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.3); }
        }

        .main {
            max-width: 1920px;
            margin: 0 auto;
            padding: 1rem 1.5rem;
        }

        /* Alert Banner */
        .alert-banner {
            background: linear-gradient(90deg, rgba(239, 68, 68, 0.2) 0%, rgba(245, 158, 11, 0.15) 100%);
            border: 2px solid var(--danger);
            border-radius: 12px;
            padding: 0.75rem 1.25rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            animation: bannerPulse 2s infinite;
        }

        @keyframes bannerPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            50% { box-shadow: 0 0 25px 5px rgba(239, 68, 68, 0.15); }
        }

        .alert-content {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .alert-icon {
            font-size: 1.8rem;
            animation: shake 0.5s infinite;
        }

        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-8deg); }
            75% { transform: rotate(8deg); }
        }

        .alert-text h3 {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--danger);
        }

        .alert-text p {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .alert-metrics {
            display: flex;
            gap: 1.5rem;
        }

        .alert-metric {
            text-align: center;
        }

        .alert-metric-value {
            font-size: 1.3rem;
            font-weight: 700;
            font-family: 'IBM Plex Mono', monospace;
            color: var(--danger);
        }

        .alert-metric-label {
            font-size: 0.6rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .alert-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* Dashboard Grid */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 360px;
            gap: 1rem;
        }

        @media (max-width: 1400px) {
            .dashboard { grid-template-columns: 1fr; }
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
        }

        .card-header {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-body { padding: 1rem; }

        /* Map Container */
        .map-section {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .map-container {
            background: var(--bg-dark);
            border-radius: 12px;
            height: 320px;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .map-svg {
            width: 100%;
            height: 100%;
        }

        .map-grid {
            stroke: var(--border);
            stroke-width: 0.3;
            fill: none;
        }

        .continent {
            fill: var(--bg-elevated);
            stroke: var(--border);
            stroke-width: 0.8;
            opacity: 0.8;
        }

        .event-marker {
            cursor: pointer;
            transition: all 0.3s;
        }

        .event-marker:hover {
            filter: brightness(1.4);
            transform: scale(1.2);
        }

        .event-pulse {
            animation: eventPulse 2s infinite;
        }

        @keyframes eventPulse {
            0% { r: 8; opacity: 0.8; }
            100% { r: 30; opacity: 0; }
        }

        .map-legend {
            position: absolute;
            bottom: 0.75rem;
            left: 0.75rem;
            background: rgba(10, 20, 20, 0.95);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.6rem;
        }

        .legend-title {
            font-size: 0.6rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.4rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.65rem;
            margin-bottom: 0.3rem;
            color: var(--text-secondary);
        }

        .legend-item:last-child { margin-bottom: 0; }

        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .legend-dot.cyclone { background: #ef4444; }
        .legend-dot.earthquake { background: #f59e0b; }
        .legend-dot.flood { background: #3b82f6; }
        .legend-dot.hail { background: #8b5cf6; }
        .legend-dot.wildfire { background: #f97316; }
        .legend-dot.monitoring { background: #10b981; }

        .map-timestamp {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: rgba(10, 20, 20, 0.95);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 0.4rem 0.6rem;
            font-size: 0.65rem;
            font-family: 'IBM Plex Mono', monospace;
            color: var(--text-muted);
        }

        /* Event Detail Panel */
        .event-detail-panel {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
        }

        .event-detail-header {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .event-type-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .event-type-icon.cyclone { background: rgba(239, 68, 68, 0.2); }
        .event-type-icon.earthquake { background: rgba(245, 158, 11, 0.2); }
        .event-type-icon.flood { background: rgba(59, 130, 246, 0.2); }
        .event-type-icon.hail { background: rgba(139, 92, 246, 0.2); }

        .event-detail-title h3 {
            font-size: 0.9rem;
            font-weight: 700;
        }

        .event-detail-title p {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .event-detail-body {
            padding: 0.75rem 1rem;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .detail-item {
            background: var(--bg-elevated);
            border-radius: 6px;
            padding: 0.5rem 0.6rem;
        }

        .detail-label {
            font-size: 0.6rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .detail-value {
            font-size: 0.85rem;
            font-weight: 600;
            font-family: 'IBM Plex Mono', monospace;
        }

        .detail-value.danger { color: var(--danger); }
        .detail-value.warning { color: var(--warning); }
        .detail-value.success { color: var(--success); }

        /* Live Chart */
        .live-chart {
            background: var(--bg-dark);
            border-radius: 8px;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .chart-title {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .chart-value {
            font-size: 0.9rem;
            font-weight: 700;
            font-family: 'IBM Plex Mono', monospace;
            color: var(--danger);
        }

        .chart-canvas {
            height: 60px;
            position: relative;
        }

        .chart-svg {
            width: 100%;
            height: 100%;
        }

        .chart-line {
            fill: none;
            stroke: var(--danger);
            stroke-width: 2;
        }

        .chart-area {
            fill: url(#dangerGradient);
        }

        .threshold-line {
            stroke: var(--success);
            stroke-width: 1.5;
            stroke-dasharray: 4, 3;
        }

        .threshold-label {
            font-size: 8px;
            fill: var(--success);
        }

        /* Trigger Status */
        .trigger-status-card {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(245, 158, 11, 0.1) 100%);
            border: 1px solid var(--danger);
            border-radius: 8px;
            padding: 0.75rem;
            text-align: center;
        }

        .trigger-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            background: var(--danger);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            animation: triggerFlash 0.8s infinite;
        }

        @keyframes triggerFlash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .trigger-condition {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        .trigger-condition strong {
            color: var(--danger);
        }

        /* Events Table */
        .events-table-container {
            max-height: 200px;
            overflow-y: auto;
        }

        .events-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.75rem;
        }

        .events-table th {
            text-align: left;
            padding: 0.5rem 0.6rem;
            font-size: 0.65rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.3px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            background: var(--bg-card);
        }

        .events-table td {
            padding: 0.5rem 0.6rem;
            border-bottom: 1px solid var(--border);
            vertical-align: middle;
        }

        .events-table tr {
            cursor: pointer;
            transition: all 0.2s;
        }

        .events-table tr:hover {
            background: var(--bg-elevated);
        }

        .events-table tr.selected {
            background: rgba(16, 185, 129, 0.1);
            border-left: 3px solid var(--success);
        }

        .events-table tr.triggered {
            background: rgba(239, 68, 68, 0.1);
        }

        .event-type-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-size: 0.65rem;
            font-weight: 600;
        }

        .event-type-badge.cyclone { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
        .event-type-badge.earthquake { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
        .event-type-badge.flood { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
        .event-type-badge.hail { background: rgba(139, 92, 246, 0.2); color: #8b5cf6; }

        .intensity-bar {
            width: 50px;
            height: 5px;
            background: var(--bg-dark);
            border-radius: 2px;
            overflow: hidden;
        }

        .intensity-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.5s ease;
        }

        .intensity-fill.critical { background: var(--danger); }
        .intensity-fill.high { background: var(--warning); }
        .intensity-fill.medium { background: var(--secondary); }
        .intensity-fill.low { background: var(--success); }

        .status-badge {
            font-size: 0.6rem;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .status-badge.triggered {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        .status-badge.monitoring {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }

        .status-badge.clear {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        /* Payout Summary */
        .payout-summary {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(245, 158, 11, 0.1) 100%);
            border: 1px solid var(--danger);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
        }

        .payout-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.25rem;
        }

        .payout-value {
            font-size: 2rem;
            font-weight: 700;
            font-family: 'IBM Plex Mono', monospace;
            background: var(--gradient-danger);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .payout-detail {
            font-size: 0.65rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        .payout-breakdown {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border);
        }

        .breakdown-item {
            text-align: center;
        }

        .breakdown-value {
            font-size: 0.9rem;
            font-weight: 700;
            font-family: 'IBM Plex Mono', monospace;
        }

        .breakdown-label {
            font-size: 0.6rem;
            color: var(--text-muted);
        }

        /* Triggered Policies */
        .policy-list {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
            max-height: 180px;
            overflow-y: auto;
        }

        .policy-item {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.6rem;
            background: var(--bg-elevated);
            border-radius: 8px;
            border-left: 3px solid var(--danger);
            cursor: pointer;
            transition: all 0.2s;
        }

        .policy-item:hover {
            background: rgba(239, 68, 68, 0.1);
        }

        .policy-item.pending {
            border-left-color: var(--warning);
        }

        .policy-icon {
            font-size: 1.1rem;
        }

        .policy-info { flex: 1; }

        .policy-id {
            font-size: 0.75rem;
            font-weight: 600;
        }

        .policy-detail {
            font-size: 0.65rem;
            color: var(--text-muted);
        }

        .policy-payout {
            text-align: right;
        }

        .policy-amount {
            font-size: 0.8rem;
            font-weight: 700;
            font-family: 'IBM Plex Mono', monospace;
            color: var(--danger);
        }

        .policy-tier {
            font-size: 0.6rem;
            color: var(--text-muted);
        }

        /* Data Sources */
        .sources-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.4rem;
        }

        .source-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem 0.5rem;
            background: var(--bg-elevated);
            border-radius: 6px;
            font-size: 0.65rem;
        }

        .source-status {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .source-status.online { background: var(--success); }
        .source-status.delayed { background: var(--warning); }
        .source-status.offline { background: var(--danger); }

        .source-name {
            flex: 1;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .source-latency {
            font-family: 'IBM Plex Mono', monospace;
            color: var(--text-muted);
            font-size: 0.6rem;
        }

        /* Feed */
        .feed-container {
            max-height: 120px;
            overflow-y: auto;
        }

        .feed-item {
            display: flex;
            gap: 0.5rem;
            padding: 0.4rem 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.7rem;
        }

        .feed-item:last-child { border-bottom: none; }

        .feed-time {
            font-family: 'IBM Plex Mono', monospace;
            color: var(--text-muted);
            font-size: 0.6rem;
            white-space: nowrap;
        }

        .feed-content {
            flex: 1;
            color: var(--text-secondary);
        }

        .feed-content.alert { color: var(--danger); }
        .feed-content.warning { color: var(--warning); }

        /* Buttons */
        .btn {
            padding: 0.6rem 0.8rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
        }

        .btn-danger {
            background: var(--gradient-danger);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
        }

        .btn-primary {
            background: var(--gradient-main);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }

        .btn-secondary {
            background: var(--bg-elevated);
            color: var(--text-secondary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg-dark);
            border-color: var(--primary);
        }

        .btn-sm {
            padding: 0.4rem 0.6rem;
            font-size: 0.7rem;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        .btn-full { grid-column: 1 / -1; }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--bg-card);
            border: 1px solid var(--success);
            border-radius: 10px;
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast-icon {
            font-size: 1.5rem;
        }

        .toast-content h4 {
            font-size: 0.85rem;
            font-weight: 600;
        }

        .toast-content p {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">üì°</div>
                <div>
                    <div class="logo-text">Descartes Underwriting</div>
                    <div class="logo-subtitle">Parametric Trigger Monitor</div>
                </div>
            </div>
            <div class="header-center">
                <div class="header-stat">
                    <div class="header-stat-value live" id="activeEventsCount">7</div>
                    <div class="header-stat-label">Active Events</div>
                </div>
                <div class="header-stat">
                    <div class="header-stat-value alert" id="triggeredCount">3</div>
                    <div class="header-stat-label">Triggers Fired</div>
                </div>
                <div class="header-stat">
                    <div class="header-stat-value warning" id="policiesCount">12</div>
                    <div class="header-stat-label">Policies Affected</div>
                </div>
                <div class="header-stat">
                    <div class="header-stat-value" id="exposureValue">‚Ç¨4.2M</div>
                    <div class="header-stat-label">Est. Exposure</div>
                </div>
            </div>
            <div class="live-indicator">
                <div class="live-dot"></div>
                <span>LIVE ‚Ä¢ <span id="dataSourceCount">84</span> Data Feeds</span>
            </div>
        </div>
    </header>

    <main class="main">
        <!-- Alert Banner -->
        <div class="alert-banner" id="alertBanner">
            <div class="alert-content">
                <div class="alert-icon">üö®</div>
                <div class="alert-text">
                    <h3>TRIGGER ACTIVATED: Cyclone Chido ‚Äî Mayotte, France</h3>
                    <p>Wind speed <strong>220 km/h</strong> exceeded threshold (150 km/h) at 09:47 UTC ‚Ä¢ Auto-validation complete</p>
                </div>
            </div>
            <div class="alert-metrics">
                <div class="alert-metric">
                    <div class="alert-metric-value">3</div>
                    <div class="alert-metric-label">Policies</div>
                </div>
                <div class="alert-metric">
                    <div class="alert-metric-value">‚Ç¨2.1M</div>
                    <div class="alert-metric-label">Payout</div>
                </div>
            </div>
            <div class="alert-actions">
                <button class="btn btn-secondary btn-sm" onclick="viewEventDetails('chido')">Details</button>
                <button class="btn btn-danger btn-sm" onclick="initiatePayout('chido')">üí≥ Initiate Payout</button>
            </div>
        </div>

        <!-- Main Dashboard -->
        <div class="dashboard">
            <div>
                <!-- Map + Event Detail -->
                <div class="map-section">
                    <div class="map-container">
                        <svg class="map-svg" viewBox="0 0 800 350" id="worldMap">
                            <defs>
                                <linearGradient id="dangerGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:rgba(239,68,68,0.4)"/>
                                    <stop offset="100%" style="stop-color:rgba(239,68,68,0)"/>
                                </linearGradient>
                            </defs>
                            <!-- Grid -->
                            <g class="grid">
                                <line x1="0" y1="87.5" x2="800" y2="87.5" class="map-grid"/>
                                <line x1="0" y1="175" x2="800" y2="175" class="map-grid"/>
                                <line x1="0" y1="262.5" x2="800" y2="262.5" class="map-grid"/>
                                <line x1="200" y1="0" x2="200" y2="350" class="map-grid"/>
                                <line x1="400" y1="0" x2="400" y2="350" class="map-grid"/>
                                <line x1="600" y1="0" x2="600" y2="350" class="map-grid"/>
                            </g>
                            <!-- Continents -->
                            <g class="continents">
                                <path d="M80,80 Q120,60 180,70 Q220,80 200,120 Q180,160 140,170 Q100,180 80,140 Q60,100 80,80" class="continent"/>
                                <path d="M120,200 Q160,180 200,200 Q240,220 220,270 Q200,320 160,310 Q120,300 100,260 Q80,220 120,200" class="continent"/>
                                <path d="M320,60 Q400,40 500,60 Q580,80 560,140 Q540,200 480,220 Q420,240 360,200 Q300,160 320,100 Q340,60 320,60" class="continent"/>
                                <path d="M420,250 Q460,240 480,270 Q500,300 470,320 Q440,340 420,310 Q400,280 420,250" class="continent"/>
                                <path d="M540,120 Q600,100 680,120 Q740,140 720,200 Q700,260 640,280 Q580,300 540,260 Q500,220 520,160 Q540,120 540,120" class="continent"/>
                                <path d="M680,280 Q720,270 740,300 Q760,330 730,340 Q700,350 680,320 Q660,290 680,280" class="continent"/>
                            </g>
                            <!-- Event Markers -->
                            <g id="eventMarkers">
                                <!-- Cyclone Chido - Mayotte (TRIGGERED) -->
                                <circle cx="490" cy="250" r="25" fill="rgba(239,68,68,0.2)" class="event-pulse"/>
                                <circle cx="490" cy="250" r="12" fill="#ef4444" class="event-marker" onclick="selectEvent('chido')" id="marker-chido"/>
                                <text x="490" y="275" text-anchor="middle" fill="#ef4444" font-size="8" font-weight="600">CHIDO</text>
                                
                                <!-- Noto Earthquake - Japan (TRIGGERED) -->
                                <circle cx="700" cy="130" r="20" fill="rgba(245,158,11,0.2)" class="event-pulse"/>
                                <circle cx="700" cy="130" r="10" fill="#f59e0b" class="event-marker" onclick="selectEvent('noto')" id="marker-noto"/>
                                <text x="700" y="150" text-anchor="middle" fill="#f59e0b" font-size="8" font-weight="600">NOTO</text>
                                
                                <!-- Hailstorm - Bavaria (MONITORING) -->
                                <circle cx="430" cy="100" r="15" fill="rgba(139,92,246,0.15)"/>
                                <circle cx="430" cy="100" r="7" fill="#8b5cf6" class="event-marker" onclick="selectEvent('bavaria')" id="marker-bavaria"/>
                                
                                <!-- Flood - Queensland (MONITORING) -->
                                <circle cx="710" cy="300" r="12" fill="rgba(59,130,246,0.15)"/>
                                <circle cx="710" cy="300" r="6" fill="#3b82f6" class="event-marker" onclick="selectEvent('queensland')" id="marker-queensland"/>
                                
                                <!-- Monitoring points -->
                                <circle cx="140" cy="120" r="5" fill="#10b981" class="event-marker" onclick="selectEvent('texas')"/>
                                <circle cx="180" cy="260" r="5" fill="#10b981" class="event-marker" onclick="selectEvent('brazil')"/>
                                <circle cx="580" cy="180" r="5" fill="#10b981" class="event-marker" onclick="selectEvent('india')"/>
                            </g>
                        </svg>
                        <div class="map-legend">
                            <div class="legend-title">Event Status</div>
                            <div class="legend-item"><div class="legend-dot cyclone"></div>Triggered</div>
                            <div class="legend-item"><div class="legend-dot hail"></div>Approaching</div>
                            <div class="legend-item"><div class="legend-dot flood"></div>Monitoring</div>
                            <div class="legend-item"><div class="legend-dot monitoring"></div>Clear</div>
                        </div>
                        <div class="map-timestamp" id="mapTimestamp">UTC: 2025-01-07 10:42:18</div>
                    </div>

                    <!-- Event Detail Panel -->
                    <div class="event-detail-panel" id="eventDetailPanel">
                        <div class="event-detail-header">
                            <div class="event-type-icon cyclone" id="eventIcon">üåÄ</div>
                            <div class="event-detail-title">
                                <h3 id="eventName">Cyclone Chido</h3>
                                <p id="eventLocation">Mayotte, France ‚Ä¢ Indian Ocean</p>
                            </div>
                        </div>
                        <div class="event-detail-body">
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <div class="detail-label">Wind Speed</div>
                                    <div class="detail-value danger" id="eventIntensity">220 km/h</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Trigger</div>
                                    <div class="detail-value success" id="eventThreshold">150 km/h</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Category</div>
                                    <div class="detail-value" id="eventCategory">Cat 4</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Pressure</div>
                                    <div class="detail-value" id="eventPressure">942 hPa</div>
                                </div>
                            </div>

                            <!-- Live Wind Chart -->
                            <div class="live-chart">
                                <div class="chart-header">
                                    <span class="chart-title">Wind Speed (24h)</span>
                                    <span class="chart-value" id="currentWind">220 km/h</span>
                                </div>
                                <div class="chart-canvas">
                                    <svg class="chart-svg" viewBox="0 0 240 60" preserveAspectRatio="none" id="windChart">
                                        <defs>
                                            <linearGradient id="chartGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                                <stop offset="0%" style="stop-color:rgba(239,68,68,0.4)"/>
                                                <stop offset="100%" style="stop-color:rgba(239,68,68,0)"/>
                                            </linearGradient>
                                        </defs>
                                        <line x1="0" y1="20" x2="240" y2="20" class="threshold-line"/>
                                        <text x="242" y="23" class="threshold-label">Trigger</text>
                                        <path id="chartArea" class="chart-area"/>
                                        <path id="chartLine" class="chart-line"/>
                                    </svg>
                                </div>
                            </div>

                            <!-- Trigger Status -->
                            <div class="trigger-status-card">
                                <div class="trigger-badge" id="triggerBadge">‚ö° TRIGGER ACTIVATED</div>
                                <div class="trigger-condition">
                                    Condition: Wind ‚â• <strong>150 km/h</strong> | Actual: <strong id="actualValue">220 km/h</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Events Table -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìä Active Events Monitor</h3>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-secondary btn-sm" onclick="refreshEvents()">üîÑ Refresh</button>
                            <button class="btn btn-secondary btn-sm" onclick="exportReport()">üì• Export</button>
                        </div>
                    </div>
                    <div class="card-body" style="padding: 0;">
                        <div class="events-table-container">
                            <table class="events-table">
                                <thead>
                                    <tr>
                                        <th>Event</th>
                                        <th>Location</th>
                                        <th>Type</th>
                                        <th>Intensity</th>
                                        <th>Threshold</th>
                                        <th>Status</th>
                                        <th>Policies</th>
                                        <th>Est. Payout</th>
                                    </tr>
                                </thead>
                                <tbody id="eventsTableBody">
                                    <tr class="triggered selected" onclick="selectEvent('chido')">
                                        <td><strong>Cyclone Chido</strong></td>
                                        <td>Mayotte, FR</td>
                                        <td><span class="event-type-badge cyclone">üåÄ Cyclone</span></td>
                                        <td>
                                            <div style="display: flex; align-items: center; gap: 0.4rem;">
                                                <div class="intensity-bar"><div class="intensity-fill critical" style="width: 95%;"></div></div>
                                                <span>220</span>
                                            </div>
                                        </td>
                                        <td>150 km/h</td>
                                        <td><span class="status-badge triggered">‚ö° TRIGGERED</span></td>
                                        <td>3</td>
                                        <td style="font-weight: 700; color: var(--danger);">‚Ç¨2,100,000</td>
                                    </tr>
                                    <tr class="triggered" onclick="selectEvent('noto')">
                                        <td><strong>Noto Earthquake</strong></td>
                                        <td>Ishikawa, JP</td>
                                        <td><span class="event-type-badge earthquake">üåã Earthquake</span></td>
                                        <td>
                                            <div style="display: flex; align-items: center; gap: 0.4rem;">
                                                <div class="intensity-bar"><div class="intensity-fill critical" style="width: 85%;"></div></div>
                                                <span>M6.8</span>
                                            </div>
                                        </td>
                                        <td>M6.0</td>
                                        <td><span class="status-badge triggered">‚ö° TRIGGERED</span></td>
                                        <td>5</td>
                                        <td style="font-weight: 700; color: var(--danger);">‚Ç¨1,450,000</td>
                                    </tr>
                                    <tr onclick="selectEvent('bavaria')">
                                        <td><strong>Severe Hailstorm</strong></td>
                                        <td>Bavaria, DE</td>
                                        <td><span class="event-type-badge hail">üå®Ô∏è Hail</span></td>
                                        <td>
                                            <div style="display: flex; align-items: center; gap: 0.4rem;">
                                                <div class="intensity-bar"><div class="intensity-fill high" style="width: 68%;"></div></div>
                                                <span>38mm</span>
                                            </div>
                                        </td>
                                        <td>40mm</td>
                                        <td><span class="status-badge monitoring">üëÅÔ∏è WATCHING</span></td>
                                        <td>2</td>
                                        <td style="color: var(--text-muted);">~‚Ç¨650,000</td>
                                    </tr>
                                    <tr onclick="selectEvent('queensland')">
                                        <td><strong>Flash Flooding</strong></td>
                                        <td>Queensland, AU</td>
                                        <td><span class="event-type-badge flood">üåä Flood</span></td>
                                        <td>
                                            <div style="display: flex; align-items: center; gap: 0.4rem;">
                                                <div class="intensity-bar"><div class="intensity-fill medium" style="width: 55%;"></div></div>
                                                <span>1.2m</span>
                                            </div>
                                        </td>
                                        <td>1.5m</td>
                                        <td><span class="status-badge monitoring">üëÅÔ∏è WATCHING</span></td>
                                        <td>2</td>
                                        <td style="color: var(--text-muted);">~‚Ç¨480,000</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Payout Summary -->
                <div class="payout-summary">
                    <div class="payout-label">Total Estimated Payouts</div>
                    <div class="payout-value" id="totalPayout">‚Ç¨4,247,000</div>
                    <div class="payout-detail">Across 12 policies ‚Ä¢ 3 triggered events</div>
                    <div class="payout-breakdown">
                        <div class="breakdown-item">
                            <div class="breakdown-value" style="color: var(--danger);">‚Ç¨3.55M</div>
                            <div class="breakdown-label">Confirmed</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-value" style="color: var(--warning);">‚Ç¨697K</div>
                            <div class="breakdown-label">Pending</div>
                        </div>
                    </div>
                </div>

                <!-- Triggered Policies -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">‚ö° Triggered Policies</h3>
                    </div>
                    <div class="card-body" style="padding: 0.75rem;">
                        <div class="policy-list">
                            <div class="policy-item" onclick="viewPolicy('0312')">
                                <div class="policy-icon">üè≠</div>
                                <div class="policy-info">
                                    <div class="policy-id">DU-CYC-2024-0312</div>
                                    <div class="policy-detail">Port Authority Mayotte</div>
                                </div>
                                <div class="policy-payout">
                                    <div class="policy-amount">‚Ç¨950,000</div>
                                    <div class="policy-tier">Tier 3 (100%)</div>
                                </div>
                            </div>
                            <div class="policy-item" onclick="viewPolicy('0298')">
                                <div class="policy-icon">üè®</div>
                                <div class="policy-info">
                                    <div class="policy-id">DU-CYC-2024-0298</div>
                                    <div class="policy-detail">Resort Group Comoros</div>
                                </div>
                                <div class="policy-payout">
                                    <div class="policy-amount">‚Ç¨720,000</div>
                                    <div class="policy-tier">Tier 3 (100%)</div>
                                </div>
                            </div>
                            <div class="policy-item" onclick="viewPolicy('0341')">
                                <div class="policy-icon">‚òÄÔ∏è</div>
                                <div class="policy-info">
                                    <div class="policy-id">DU-CYC-2024-0341</div>
                                    <div class="policy-detail">Solar Farm Mayotte</div>
                                </div>
                                <div class="policy-payout">
                                    <div class="policy-amount">‚Ç¨430,000</div>
                                    <div class="policy-tier">Tier 2 (75%)</div>
                                </div>
                            </div>
                            <div class="policy-item pending" onclick="viewPolicy('0187')">
                                <div class="policy-icon">üè≠</div>
                                <div class="policy-info">
                                    <div class="policy-id">DU-EQ-2024-0187</div>
                                    <div class="policy-detail">Manufacturing Ishikawa</div>
                                </div>
                                <div class="policy-payout">
                                    <div class="policy-amount">‚Ç¨890,000</div>
                                    <div class="policy-tier">Tier 2 (50%)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Sources -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üì° Data Sources</h3>
                        <span style="font-size: 0.65rem; color: var(--success);">84/86 Online</span>
                    </div>
                    <div class="card-body" style="padding: 0.75rem;">
                        <div class="sources-grid">
                            <div class="source-item">
                                <div class="source-status online"></div>
                                <span class="source-name">NOAA</span>
                                <span class="source-latency">89ms</span>
                            </div>
                            <div class="source-item">
                                <div class="source-status online"></div>
                                <span class="source-name">ECMWF</span>
                                <span class="source-latency">142ms</span>
                            </div>
                            <div class="source-item">
                                <div class="source-status online"></div>
                                <span class="source-name">USGS</span>
                                <span class="source-latency">67ms</span>
                            </div>
                            <div class="source-item">
                                <div class="source-status online"></div>
                                <span class="source-name">M√©t√©o-France</span>
                                <span class="source-latency">54ms</span>
                            </div>
                            <div class="source-item">
                                <div class="source-status online"></div>
                                <span class="source-name">Sentinel-2</span>
                                <span class="source-latency">1.8s</span>
                            </div>
                            <div class="source-item">
                                <div class="source-status online"></div>
                                <span class="source-name">JMA Japan</span>
                                <span class="source-latency">112ms</span>
                            </div>
                            <div class="source-item">
                                <div class="source-status delayed"></div>
                                <span class="source-name">IoT Sensors</span>
                                <span class="source-latency">890ms</span>
                            </div>
                            <div class="source-item">
                                <div class="source-status online"></div>
                                <span class="source-name">NASA EOSDIS</span>
                                <span class="source-latency">234ms</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Live Feed -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìú Live Feed</h3>
                    </div>
                    <div class="card-body" style="padding: 0.75rem;">
                        <div class="feed-container" id="liveFeed">
                            <div class="feed-item">
                                <span class="feed-time">10:42:18</span>
                                <span class="feed-content alert">‚ö° Trigger activated: Cyclone Chido</span>
                            </div>
                            <div class="feed-item">
                                <span class="feed-time">10:41:54</span>
                                <span class="feed-content">Wind speed update: 220 km/h (+5)</span>
                            </div>
                            <div class="feed-item">
                                <span class="feed-time">10:40:22</span>
                                <span class="feed-content warning">Bavaria hail approaching threshold</span>
                            </div>
                            <div class="feed-item">
                                <span class="feed-time">10:38:47</span>
                                <span class="feed-content">Policy DU-CYC-0312 matched</span>
                            </div>
                            <div class="feed-item">
                                <span class="feed-time">10:35:11</span>
                                <span class="feed-content">ECMWF forecast updated</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Actions -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">‚ö° Actions</h3>
                    </div>
                    <div class="card-body" style="padding: 0.75rem;">
                        <div class="action-buttons">
                            <button class="btn btn-secondary" onclick="exportReport()">üìä Report</button>
                            <button class="btn btn-secondary" onclick="notifyClients()">üìß Notify</button>
                            <button class="btn btn-danger btn-full" onclick="initiateAllPayouts()">
                                üí≥ Initiate All Payouts (‚Ç¨4.2M)
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-icon">‚úÖ</div>
        <div class="toast-content">
            <h4 id="toastTitle">Action Completed</h4>
            <p id="toastMessage">Operation successful</p>
        </div>
    </div>

    <script>
        // Event Data
        const events = {
            chido: {
                name: 'Cyclone Chido',
                location: 'Mayotte, France ‚Ä¢ Indian Ocean',
                type: 'cyclone',
                icon: 'üåÄ',
                intensity: 220,
                intensityUnit: 'km/h',
                threshold: 150,
                category: 'Cat 4',
                pressure: '942 hPa',
                status: 'triggered',
                policies: 3,
                payout: 2100000
            },
            noto: {
                name: 'Noto Earthquake',
                location: 'Ishikawa, Japan ‚Ä¢ Sea of Japan',
                type: 'earthquake',
                icon: 'üåã',
                intensity: 6.8,
                intensityUnit: 'M',
                threshold: 6.0,
                category: 'Strong',
                pressure: '12km depth',
                status: 'triggered',
                policies: 5,
                payout: 1450000
            },
            bavaria: {
                name: 'Severe Hailstorm',
                location: 'Bavaria, Germany ‚Ä¢ Central Europe',
                type: 'hail',
                icon: 'üå®Ô∏è',
                intensity: 38,
                intensityUnit: 'mm',
                threshold: 40,
                category: 'Severe',
                pressure: '985 hPa',
                status: 'monitoring',
                policies: 2,
                payout: 650000
            },
            queensland: {
                name: 'Flash Flooding',
                location: 'Queensland, Australia ‚Ä¢ Pacific',
                type: 'flood',
                icon: 'üåä',
                intensity: 1.2,
                intensityUnit: 'm',
                threshold: 1.5,
                category: 'Moderate',
                pressure: '156mm/24h',
                status: 'monitoring',
                policies: 2,
                payout: 480000
            }
        };

        let currentEvent = 'chido';
        let windData = [100, 105, 115, 125, 140, 155, 170, 185, 195, 205, 215, 220];

        // Update timestamp
        function updateTimestamp() {
            const now = new Date();
            document.getElementById('mapTimestamp').textContent = 
                `UTC: ${now.toISOString().slice(0, 19).replace('T', ' ')}`;
        }

        // Select event
        function selectEvent(eventId) {
            if (!events[eventId]) return;
            
            currentEvent = eventId;
            const event = events[eventId];

            // Update detail panel
            document.getElementById('eventIcon').textContent = event.icon;
            document.getElementById('eventIcon').className = `event-type-icon ${event.type}`;
            document.getElementById('eventName').textContent = event.name;
            document.getElementById('eventLocation').textContent = event.location;
            document.getElementById('eventIntensity').textContent = `${event.intensity} ${event.intensityUnit}`;
            document.getElementById('eventThreshold').textContent = `${event.threshold} ${event.intensityUnit}`;
            document.getElementById('eventCategory').textContent = event.category;
            document.getElementById('eventPressure').textContent = event.pressure;
            document.getElementById('actualValue').textContent = `${event.intensity} ${event.intensityUnit}`;

            // Update trigger badge
            const badge = document.getElementById('triggerBadge');
            if (event.status === 'triggered') {
                badge.textContent = '‚ö° TRIGGER ACTIVATED';
                badge.style.background = 'var(--danger)';
            } else {
                badge.textContent = 'üëÅÔ∏è MONITORING';
                badge.style.background = 'var(--warning)';
            }

            // Update current wind display
            document.getElementById('currentWind').textContent = `${event.intensity} ${event.intensityUnit}`;

            // Highlight selected row
            document.querySelectorAll('.events-table tr').forEach(row => {
                row.classList.remove('selected');
            });
            event.currentTarget?.closest('tr')?.classList.add('selected');

            // Highlight map marker
            document.querySelectorAll('.event-marker').forEach(marker => {
                marker.setAttribute('stroke', 'none');
                marker.setAttribute('stroke-width', '0');
            });
            const marker = document.getElementById(`marker-${eventId}`);
            if (marker) {
                marker.setAttribute('stroke', '#fff');
                marker.setAttribute('stroke-width', '2');
            }
        }

        // Draw chart
        function drawChart() {
            const svg = document.getElementById('windChart');
            const width = 240;
            const height = 60;
            const padding = 5;

            // Normalize data
            const maxVal = Math.max(...windData, 150) * 1.1;
            const points = windData.map((val, i) => {
                const x = (i / (windData.length - 1)) * (width - padding * 2) + padding;
                const y = height - (val / maxVal) * (height - padding * 2) - padding;
                return `${x},${y}`;
            });

            // Area path
            const areaPath = `M${padding},${height} L${points.join(' L')} L${width - padding},${height} Z`;
            document.getElementById('chartArea').setAttribute('d', areaPath);

            // Line path
            const linePath = `M${points.join(' L')}`;
            document.getElementById('chartLine').setAttribute('d', linePath);
        }

        // Simulate live updates
        function simulateLiveData() {
            // Update wind speed
            const variation = Math.floor(Math.random() * 10) - 4;
            const newWind = Math.max(180, Math.min(240, windData[windData.length - 1] + variation));
            windData.push(newWind);
            if (windData.length > 12) windData.shift();

            // Update display
            document.getElementById('currentWind').textContent = `${newWind} km/h`;
            if (currentEvent === 'chido') {
                document.getElementById('eventIntensity').textContent = `${newWind} km/h`;
                document.getElementById('actualValue').textContent = `${newWind} km/h`;
                events.chido.intensity = newWind;
            }

            drawChart();

            // Add feed item occasionally
            if (Math.random() > 0.7) {
                addFeedItem();
            }
        }

        // Add feed item
        function addFeedItem() {
            const feed = document.getElementById('liveFeed');
            const messages = [
                { text: `Wind speed update: ${windData[windData.length - 1]} km/h`, class: '' },
                { text: 'ECMWF model refresh complete', class: '' },
                { text: 'Sentinel-2 imagery received', class: '' },
                { text: 'Policy exposure recalculated', class: '' },
                { text: 'Bavaria hail cell tracking', class: 'warning' }
            ];
            const msg = messages[Math.floor(Math.random() * messages.length)];
            const now = new Date();
            const time = now.toTimeString().slice(0, 8);

            const item = document.createElement('div');
            item.className = 'feed-item';
            item.innerHTML = `
                <span class="feed-time">${time}</span>
                <span class="feed-content ${msg.class}">${msg.text}</span>
            `;
            feed.insertBefore(item, feed.firstChild);

            // Keep feed manageable
            while (feed.children.length > 10) {
                feed.removeChild(feed.lastChild);
            }
        }

        // Actions
        function initiatePayout(eventId) {
            const event = events[eventId];
            showToast('Payout Initiated', `‚Ç¨${(event.payout).toLocaleString()} queued for ${event.policies} policies`);
        }

        function initiateAllPayouts() {
            if (confirm('Initiate payouts totaling ‚Ç¨4,247,000 for 12 policies?')) {
                showToast('All Payouts Initiated', 'Funds will be transferred within 48 hours');
            }
        }

        function viewEventDetails(eventId) {
            selectEvent(eventId);
        }

        function viewPolicy(policyId) {
            showToast('Policy Details', `Loading DU-XXX-2024-${policyId}...`);
        }

        function refreshEvents() {
            showToast('Data Refreshed', 'All event data updated from 84 sources');
        }

        function exportReport() {
            showToast('Report Generated', 'PDF exported with all trigger validations');
        }

        function notifyClients() {
            showToast('Notifications Sent', 'Email alerts sent to 12 affected policyholders');
        }

        // Toast notification
        function showToast(title, message) {
            const toast = document.getElementById('toast');
            document.getElementById('toastTitle').textContent = title;
            document.getElementById('toastMessage').textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            drawChart();
            updateTimestamp();
            selectEvent('chido');

            // Start live updates
            setInterval(simulateLiveData, 3000);
            setInterval(updateTimestamp, 1000);

            // Animate intensity bars
            document.querySelectorAll('.intensity-fill').forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0';
                setTimeout(() => {
                    bar.style.width = width;
                    bar.style.transition = 'width 1s ease';
                }, 300);
            });
        });
    </script>
</body>
</html>
